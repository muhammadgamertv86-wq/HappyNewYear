<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My World</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&family=Playfair+Display:ital,wght@1,400;1,600&display=swap"
        rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            color: white;
            font-family: 'Outfit', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            height: 100vh;
        }

        #canvas-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .text-overlay {
            position: relative;
            z-index: 10;
            text-align: center;
            margin-bottom: 3rem;
            /* Push text up slightly */
            pointer-events: none;
            /* Let clicks pass through to the earth */
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.8);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            color: #ffd700;
            margin: 0;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease-out;
        }

        p {
            font-size: 1.5rem;
            color: rgba(255, 255, 255, 0.9);
            margin: 0;
            letter-spacing: 2px;
            animation: fadeInUp 1s ease-out 0.5s backwards;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 20;
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 30px;
            transition: all 0.3s;
            cursor: pointer;
            backdrop-filter: blur(5px);
        }

        .back-btn:hover {
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            border-color: #ffd700;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile Adjustments */
        @media (max-width: 600px) {
            h1 {
                font-size: 2rem;
            }

            p {
                font-size: 1.1rem;
            }

            .text-overlay {
                margin-bottom: 2rem;
                padding: 0 1rem;
            }
        }

        /* Satellite Label */
        #satellite-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: #ffd700;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            pointer-events: none;
            white-space: nowrap;
            display: none;
            z-index: 15;
            border: 1px solid rgba(255, 215, 0, 0.3);
            font-family: 'Playfair Display', serif;
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.2);
        }
    </style>
</head>

<body>
    <a href="wish.html" class="back-btn">‚Üê Back</a>

    <div id="satellite-label">Always Yours, Moshi&lt;3</div>
    <div id="canvas-container"></div>

    <div class="text-overlay">
        <h1>Yes thats right Duniya ho tum meri</h1>
        <p>You mean everything to me <span style="color: #ff4d4d; font-size: 1.8rem;">&hearts;</span></p>
    </div>

    <!-- Three.js from CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- OrbitControls -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // Scene Setup
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });

        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.getElementById('canvas-container').appendChild(renderer.domElement);

        // Controls
        const controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        controls.dampingFactor = 0.05;
        controls.enableZoom = false;
        controls.autoRotate = true;
        controls.autoRotateSpeed = 2.0;

        // Satellite & Interaction State
        let satellite, satelliteLabel;
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        let isLightOn = false;
        let originalLightIntensity;

        // Earth
        const geometry = new THREE.SphereGeometry(2, 64, 64);
        const textureLoader = new THREE.TextureLoader();

        // High quality earth texture
        const earthTexture = textureLoader.load('https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Solarsystemscope_texture_2k_earth_daymap.jpg/2560px-Solarsystemscope_texture_2k_earth_daymap.jpg');

        const material = new THREE.MeshPhongMaterial({
            map: earthTexture,
            shininess: 5 // Adjust shininess
        });

        const earth = new THREE.Mesh(geometry, material);
        scene.add(earth);

        // Satellite Group
        const satelliteGroup = new THREE.Group();

        // Satellite Visual (Small Golden Heart/Sphere)
        const satGeom = new THREE.SphereGeometry(0.1, 16, 16);
        const satMat = new THREE.MeshPhongMaterial({
            color: 0xffd700,
            emissive: 0xffd700,
            emissiveIntensity: 0.5
        });
        satellite = new THREE.Mesh(satGeom, satMat);
        satelliteGroup.add(satellite);

        // Glow effect for satellite
        const spriteMaterial = new THREE.SpriteMaterial({
            map: textureLoader.load('https://threejs.org/examples/textures/lensflare/lensflare0.png'),
            color: 0xffd700,
            transparent: true,
            opacity: 0.7,
            blending: THREE.AdditiveBlending
        });
        const sprite = new THREE.Sprite(spriteMaterial);
        sprite.scale.set(0.4, 0.4, 1);
        satelliteGroup.add(sprite);

        scene.add(satelliteGroup);
        satelliteLabel = document.getElementById('satellite-label');

        // Lighting
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.2);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 1.5);
        pointLight.position.set(5, 3, 5);
        scene.add(pointLight);
        originalLightIntensity = pointLight.intensity;

        // Stars Background
        const starsGeometry = new THREE.BufferGeometry();
        const starsCount = 2000;
        const posArray = new Float32Array(starsCount * 3);

        for (let i = 0; i < starsCount * 3; i++) {
            posArray[i] = (Math.random() - 0.5) * 50; // Spread stars
        }

        starsGeometry.setAttribute('position', new THREE.BufferAttribute(posArray, 3));
        const starsMaterial = new THREE.PointsMaterial({
            size: 0.02,
            color: 0xffffff,
            transparent: true,
            opacity: 0.8
        });

        const stars = new THREE.Points(starsGeometry, starsMaterial);
        scene.add(stars);


        camera.position.z = 5;

        // Animation Loop
        let time = 0;
        function animate() {
            requestAnimationFrame(animate);
            time += 0.01;

            // Orbit Satellite
            const orbitRadius = 3.5;
            satelliteGroup.position.x = Math.cos(time) * orbitRadius;
            satelliteGroup.position.z = Math.sin(time) * orbitRadius;
            satelliteGroup.position.y = Math.sin(time * 0.5) * 1.5;

            // Update Label Position
            const vector = satelliteGroup.position.clone();
            vector.project(camera);

            const x = (vector.x * 0.5 + 0.5) * window.innerWidth;
            const y = (vector.y * -0.5 + 0.5) * window.innerHeight;

            satelliteLabel.style.display = 'block';
            satelliteLabel.style.left = `${x}px`;
            satelliteLabel.style.top = `${y - 40}px`;

            controls.update();
            renderer.render(scene, camera);
        }
        animate();

        // Interaction Logic
        function handleInteraction(event) {
            const rect = renderer.domElement.getBoundingClientRect();
            const clientX = event.clientX || (event.touches ? event.touches[0].clientX : 0);
            const clientY = event.clientY || (event.touches ? event.touches[0].clientY : 0);

            mouse.x = ((clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((clientY - rect.top) / rect.height) * 2 + 1;

            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObject(satellite, true);

            if (intersects.length > 0) {
                toggleLights();
            }
        }

        function toggleLights() {
            if (isLightOn) return;
            isLightOn = true;

            // Turn lights on!
            pointLight.intensity = 5;
            earth.material.emissive = new THREE.Color(0x111111);
            satellite.scale.set(2, 2, 2);

            setTimeout(() => {
                pointLight.intensity = originalLightIntensity;
                earth.material.emissive = new THREE.Color(0x000000);
                satellite.scale.set(1, 1, 1);
                isLightOn = false;
            }, 2000);
        }

        window.addEventListener('mousedown', handleInteraction);
        window.addEventListener('touchstart', handleInteraction);

        // Responsive
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);

            // Adjust camera distance for mobile
            if (window.innerWidth < 600) {
                camera.position.z = 7;
            } else {
                camera.position.z = 5;
            }
        });

        // Initial check
        if (window.innerWidth < 600) camera.position.z = 7;
    </script>
</body>

</html>